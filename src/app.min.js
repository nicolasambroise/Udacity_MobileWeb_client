function trackInstalling(e){e.addEventListener("statechange",function(){"installed"==e.state&&updateReady(e)})}function updateReady(e){console.log("New version available")}window.addEventListener("load",()=>{var e;navigator.serviceWorker&&(navigator.serviceWorker.register("/sw.min.js",{scope:"/"}).then(function(e){if(navigator.serviceWorker.controller){if(e.installing)return console.log("Service worker installing"),void trackInstalling(e.installing);if(e.waiting)return console.log("Service worker installed"),void updateReady(e.waiting);e.active&&console.log("Service worker active"),e.addEventListener("updatefound",function(){console.log("Update found !"),trackInstalling(e.installing)})}}).catch(function(e){console.log("Registration failed with "+e)}),navigator.serviceWorker.addEventListener("controllerchange",function(){e||(console.log("Refreshing !"),window.location.reload(),e=!0)}))});
